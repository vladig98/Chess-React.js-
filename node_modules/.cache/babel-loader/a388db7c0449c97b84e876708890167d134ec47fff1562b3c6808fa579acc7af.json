{"ast":null,"code":"import { PIECES, FEN_PIECES_BLACK, COLORS, CASTLE_ROW_WHITE, CASTLE_ROW_BLACK, CASTLE_KING_INITIAL_COL, CASTLE_ROOK_INITIAL_COL_LONG, CASTLE_ROOK_INITIAL_COL_SHORT, CASTLE_PATH_COLS_LONG, CASTLE_PATH_COLS_SHORT, PIECE_COLOR_INDEX, PIECE_PIECE_INDEX, FEN_PIECES_WHITE, EMPTY_SQUARE_PIECE, CASTLE_ROOK_FINAL_COL_LONG, CASTLE_ROOK_FINAL_COL_SHORT, CASTLE_KING_FINAL_COL_LONG, CASTLE_KING_FINAL_COL_SHORT, EMPTY_SQUARES_AFTER_LONG_CASTLE, EMPTY_SQUARES_AFTER_SHORT_CASTLE, BoardPosition } from './globalVariables';\n\n//Checks if a character is Uppercase using the ASCII table; 65 (A); 90 (Z)\nexport function IsUpperCase(value) {\n  return value.charCodeAt(0) >= 65 && value.charCodeAt(0) <= 90;\n}\n\n//Checks if a character is Lowercase using the ASCII table; 97 (a); 122 (z)\n_c = IsUpperCase;\nexport function IsLowerCase(value) {\n  return value.charCodeAt(0) >= 97 && value.charCodeAt(0) <= 122;\n}\n\n//Checks if a character is a Digit using the ASCII table; 48 (0); 57 (9)\n_c2 = IsLowerCase;\nexport function IsDigit(value) {\n  return value.charCodeAt(0) >= 48 && value.charCodeAt(0) <= 57;\n}\n\n//splits the FEN string to each individual part that makes it\n_c3 = IsDigit;\nexport function ParseFEN(fen) {\n  const fenParts = fen.split(' ');\n  if (fenParts.length != 6) {\n    console.log('Invalid FEN');\n    return;\n  }\n  const fenBoard = fenParts[0];\n  const fenTurn = fenParts[1];\n  const fenCastling = fenParts[2];\n  const fenEnPassant = fenParts[3];\n  const fenHalfMoves = Number(fenParts[4]);\n  const fenFullMoves = Number(fenParts[5]);\n  return {\n    fenBoard,\n    fenTurn,\n    fenCastling,\n    fenEnPassant,\n    fenHalfMoves,\n    fenFullMoves\n  };\n}\n\n//converts FEN piece notation to an actual piece\n_c4 = ParseFEN;\nexport function ConvertFENtoPiece(letter) {\n  switch (letter.toLowerCase()) {\n    case FEN_PIECES_BLACK.PAWN:\n      return PIECES.PAWN;\n    case FEN_PIECES_BLACK.KNIGHT:\n      return PIECES.KNIGHT;\n    case FEN_PIECES_BLACK.KING:\n      return PIECES.KING;\n    case FEN_PIECES_BLACK.QUEEN:\n      return PIECES.QUEEN;\n    case FEN_PIECES_BLACK.ROOK:\n      return PIECES.ROOK;\n    case FEN_PIECES_BLACK.BISHOP:\n      return PIECES.BISHOP;\n    default:\n      return \"\";\n  }\n}\n\n//converts the FEN piece notation to a piece that we can use in the square component\n_c5 = ConvertFENtoPiece;\nexport function ConvertFENPieceToPiece(value) {\n  if (IsUpperCase(value)) {\n    return `${COLORS.WHITE}-${ConvertFENtoPiece(value)}`;\n  }\n  if (IsLowerCase(value)) {\n    return `${COLORS.BLACK}-${ConvertFENtoPiece(value)}`;\n  }\n  return \"\";\n}\n_c6 = ConvertFENPieceToPiece;\nexport function ConvertFenToString(value) {\n  let result = [];\n  for (let i = 0; i < value.length; i++) {\n    if (IsDigit(value.charAt(i))) {\n      for (let j = 0; j < Number(value.charAt(i)); j++) {\n        result.push(\" \");\n      }\n    } else {\n      result.push(value.charAt(i));\n    }\n  }\n  return result.join('');\n}\n_c7 = ConvertFenToString;\nfunction checkIfTwoSquaresAreOnTheSameRow(square1, square2) {\n  return square1.props.x == square2.props.x;\n}\nfunction checkIfWeAreOnTheSquaresRow(square, rowNumber) {\n  return square.props.x == rowNumber;\n}\n\n//gets the piece\nexport function getPiece(square) {\n  return square.props.piece.split(PIECE_DELIMITER)[PIECE_PIECE_INDEX];\n}\n\n//checks if piece is positioned on a certain square\nexport function doesTheSquareHasThePiece(square, piece) {\n  let p = getPiece(square);\n  return p == piece;\n}\n\n//gets the piece color\nexport function getPieceColor(square) {\n  return square.props.piece.split(PIECE_DELIMITER)[PIECE_COLOR_INDEX];\n}\n\n//checks if a color is white\nexport function isColorWhite(color) {\n  return color == COLORS.WHITE;\n}\nfunction areWeCastling(square1, square2) {\n  return Math.abs(square1.props.y - square2.props.y) == 2;\n}\nfunction areWeShortCastling(withWhite = true) {\n  const piecesCastling = withWhite ? CASTLE_ROW_WHITE : CASTLE_ROW_BLACK;\n  const pieces = withWhite ? [...FEN_PIECES_WHITE] : [...FEN_PIECES_BLACK];\n  return BoardPosition[piecesCastling][CASTLE_ROOK_INITIAL_COL_SHORT] == pieces.ROOK && BoardPosition[piecesCastling][CASTLE_KING_INITIAL_COL];\n  CASTLE_PATH_COLS_SHORT.every(col => BoardPosition[piecesCastling][col] == EMPTY_SQUARE_PIECE);\n}\nfunction areWeLongCastling(withWhite = true) {\n  const piecesCastling = withWhite ? CASTLE_ROW_WHITE : CASTLE_ROW_BLACK;\n  const pieces = withWhite ? [...FEN_PIECES_WHITE] : [...FEN_PIECES_BLACK];\n  return BoardPosition[piecesCastling][CASTLE_ROOK_INITIAL_COL_LONG] == pieces.ROOK && CASTLE_PATH_COLS_LONG.every(col => BoardPosition[piecesCastling][col] == EMPTY_SQUARE_PIECE);\n}\nexport function UpdatePosition(square, targetSquare, position) {\n  let pos = [];\n  for (let rowNumber = 0; rowNumber < position.length; rowNumber++) {\n    if (checkIfTwoSquaresAreOnTheSameRow(square, targetSquare) && checkIfWeAreOnTheSquaresRow(square, rowNumber)) {\n      let row = position[rowNumber];\n      if (doesTheSquareHasThePiece(square, PIECES.KING) && areWeCastling(square, targetSquare)) {\n        let color = getPieceColor(square);\n        if (areWeLongCastling() || areWeLongCastling(false)) {\n          let kingPiece = isColorWhite(color) ? FEN_PIECES_WHITE.KING : FEN_PIECES_BLACK.KING;\n          let rookPiece = isColorWhite(color) ? FEN_PIECES_WHITE.ROOK : FEN_PIECES_BLACK.ROOK;\n          for (let i = 0; i < EMPTY_SQUARES_AFTER_LONG_CASTLE.length; i++) {\n            row[i] = EMPTY_SQUARE_PIECE;\n          }\n          row[CASTLE_KING_FINAL_COL_LONG] = kingPiece;\n          row[CASTLE_ROOK_FINAL_COL_LONG] = rookPiece;\n        }\n        if (areWeShortCastling() || areWeShortCastling(false)) {\n          let kingPiece = isColorWhite(color) ? FEN_PIECES_WHITE.KING : FEN_PIECES_BLACK.KING;\n          let rookPiece = isColorWhite(color) ? FEN_PIECES_WHITE.ROOK : FEN_PIECES_BLACK.ROOK;\n          for (let i = 0; i < EMPTY_SQUARES_AFTER_SHORT_CASTLE.length; i++) {\n            row[i] = EMPTY_SQUARE_PIECE;\n          }\n          row[CASTLE_KING_FINAL_COL_SHORT] = kingPiece;\n          row[CASTLE_ROOK_FINAL_COL_SHORT] = rookPiece;\n        }\n      }\n      row = SidewaysCapture(row, Number(square.props.y), Number(targetSquare.props.y), square.props.piece);\n      pos.push(row);\n    } else if (checkIfWeAreOnTheSquaresRow(square, rowNumber)) {\n      let row = position[rowNumber];\n      row[square.props.y] = EMPTY_SQUARE_PIECE;\n      pos.push(row);\n    } else if (checkIfWeAreOnTheSquaresRow(targetSquare, rowNumber)) {\n      let row = position[rowNumber];\n      row[targetSquare.props.y] = ConvertPieceToFENPiece(square.props.piece);\n      pos.push(row);\n    } else {\n      pos.push(position[rowNumber]);\n    }\n  }\n  return pos;\n}\n_c8 = UpdatePosition;\nfunction SidewaysCapture(row, y, targetY, value) {\n  let result = [];\n  for (let i = 0; i < row.length; i++) {\n    if (i == y) {\n      result.push(\" \");\n    } else if (i == targetY) {\n      result.push(ConvertPieceToFENPiece(value));\n    } else {\n      result.push(row[i]);\n    }\n  }\n  return result;\n}\n_c9 = SidewaysCapture;\nfunction ConvertStringToFEN(value) {\n  let result = [];\n  let counter = 0;\n  for (let i = 0; i < value.length; i++) {\n    if (value.charAt(i) == ' ') {\n      counter++;\n    } else {\n      if (counter != 0) {\n        result.push(counter);\n      }\n      result.push(value.charAt(i));\n      counter = 0;\n    }\n  }\n  if (counter != 0) {\n    result.push(counter);\n  }\n  return result.join('');\n}\n_c10 = ConvertStringToFEN;\nfunction replaceAt(value, replacement, index) {\n  return value.substring(0, index) + replacement + value.substring(index + replacement.toString().length);\n}\nfunction ConvertPieceToFENPiece(value) {\n  let color = value.split('-')[0];\n  let piece = value.split('-')[1];\n  let p = '';\n  switch (piece) {\n    case \"pawn\":\n      p = 'p';\n      break;\n    case \"knight\":\n      p = 'n';\n      break;\n    case \"bishop\":\n      p = 'b';\n      break;\n    case \"rook\":\n      p = 'r';\n      break;\n    case \"queen\":\n      p = 'q';\n      break;\n    case \"king\":\n      p = 'k';\n      break;\n    default:\n      break;\n  }\n  return color == \"white\" ? p.toString().toUpperCase() : p.toString();\n}\n_c11 = ConvertPieceToFENPiece;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n$RefreshReg$(_c, \"IsUpperCase\");\n$RefreshReg$(_c2, \"IsLowerCase\");\n$RefreshReg$(_c3, \"IsDigit\");\n$RefreshReg$(_c4, \"ParseFEN\");\n$RefreshReg$(_c5, \"ConvertFENtoPiece\");\n$RefreshReg$(_c6, \"ConvertFENPieceToPiece\");\n$RefreshReg$(_c7, \"ConvertFenToString\");\n$RefreshReg$(_c8, \"UpdatePosition\");\n$RefreshReg$(_c9, \"SidewaysCapture\");\n$RefreshReg$(_c10, \"ConvertStringToFEN\");\n$RefreshReg$(_c11, \"ConvertPieceToFENPiece\");","map":{"version":3,"names":["PIECES","FEN_PIECES_BLACK","COLORS","CASTLE_ROW_WHITE","CASTLE_ROW_BLACK","CASTLE_KING_INITIAL_COL","CASTLE_ROOK_INITIAL_COL_LONG","CASTLE_ROOK_INITIAL_COL_SHORT","CASTLE_PATH_COLS_LONG","CASTLE_PATH_COLS_SHORT","PIECE_COLOR_INDEX","PIECE_PIECE_INDEX","FEN_PIECES_WHITE","EMPTY_SQUARE_PIECE","CASTLE_ROOK_FINAL_COL_LONG","CASTLE_ROOK_FINAL_COL_SHORT","CASTLE_KING_FINAL_COL_LONG","CASTLE_KING_FINAL_COL_SHORT","EMPTY_SQUARES_AFTER_LONG_CASTLE","EMPTY_SQUARES_AFTER_SHORT_CASTLE","BoardPosition","IsUpperCase","value","charCodeAt","_c","IsLowerCase","_c2","IsDigit","_c3","ParseFEN","fen","fenParts","split","length","console","log","fenBoard","fenTurn","fenCastling","fenEnPassant","fenHalfMoves","Number","fenFullMoves","_c4","ConvertFENtoPiece","letter","toLowerCase","PAWN","KNIGHT","KING","QUEEN","ROOK","BISHOP","_c5","ConvertFENPieceToPiece","WHITE","BLACK","_c6","ConvertFenToString","result","i","charAt","j","push","join","_c7","checkIfTwoSquaresAreOnTheSameRow","square1","square2","props","x","checkIfWeAreOnTheSquaresRow","square","rowNumber","getPiece","piece","PIECE_DELIMITER","doesTheSquareHasThePiece","p","getPieceColor","isColorWhite","color","areWeCastling","Math","abs","y","areWeShortCastling","withWhite","piecesCastling","pieces","every","col","areWeLongCastling","UpdatePosition","targetSquare","position","pos","row","kingPiece","rookPiece","SidewaysCapture","ConvertPieceToFENPiece","_c8","targetY","_c9","ConvertStringToFEN","counter","_c10","replaceAt","replacement","index","substring","toString","toUpperCase","_c11","$RefreshReg$"],"sources":["C:/Users/Vladi Gotsin/Desktop/react/Chess-React.js-/src/HelperMethods.js"],"sourcesContent":["import {\r\n    PIECES, FEN_PIECES_BLACK, COLORS, CASTLE_ROW_WHITE, CASTLE_ROW_BLACK, CASTLE_KING_INITIAL_COL, CASTLE_ROOK_INITIAL_COL_LONG, CASTLE_ROOK_INITIAL_COL_SHORT,\r\n    CASTLE_PATH_COLS_LONG, CASTLE_PATH_COLS_SHORT, PIECE_COLOR_INDEX, PIECE_PIECE_INDEX, FEN_PIECES_WHITE, EMPTY_SQUARE_PIECE, CASTLE_ROOK_FINAL_COL_LONG,\r\n    CASTLE_ROOK_FINAL_COL_SHORT, CASTLE_KING_FINAL_COL_LONG, CASTLE_KING_FINAL_COL_SHORT, EMPTY_SQUARES_AFTER_LONG_CASTLE, EMPTY_SQUARES_AFTER_SHORT_CASTLE,\r\n    BoardPosition\r\n} from './globalVariables'\r\n\r\n//Checks if a character is Uppercase using the ASCII table; 65 (A); 90 (Z)\r\nexport function IsUpperCase(value) {\r\n    return value.charCodeAt(0) >= 65 && value.charCodeAt(0) <= 90\r\n}\r\n\r\n//Checks if a character is Lowercase using the ASCII table; 97 (a); 122 (z)\r\nexport function IsLowerCase(value) {\r\n    return value.charCodeAt(0) >= 97 && value.charCodeAt(0) <= 122\r\n}\r\n\r\n//Checks if a character is a Digit using the ASCII table; 48 (0); 57 (9)\r\nexport function IsDigit(value) {\r\n    return value.charCodeAt(0) >= 48 && value.charCodeAt(0) <= 57\r\n}\r\n\r\n//splits the FEN string to each individual part that makes it\r\nexport function ParseFEN(fen) {\r\n    const fenParts = fen.split(' ');\r\n\r\n    if (fenParts.length != 6) {\r\n        console.log('Invalid FEN')\r\n        return;\r\n    }\r\n\r\n    const fenBoard = fenParts[0];\r\n    const fenTurn = fenParts[1];\r\n    const fenCastling = fenParts[2];\r\n    const fenEnPassant = fenParts[3];\r\n    const fenHalfMoves = Number(fenParts[4])\r\n    const fenFullMoves = Number(fenParts[5])\r\n\r\n    return { fenBoard, fenTurn, fenCastling, fenEnPassant, fenHalfMoves, fenFullMoves }\r\n}\r\n\r\n//converts FEN piece notation to an actual piece\r\nexport function ConvertFENtoPiece(letter) {\r\n    switch (letter.toLowerCase()) {\r\n        case FEN_PIECES_BLACK.PAWN:\r\n            return PIECES.PAWN\r\n        case FEN_PIECES_BLACK.KNIGHT:\r\n            return PIECES.KNIGHT\r\n        case FEN_PIECES_BLACK.KING:\r\n            return PIECES.KING\r\n        case FEN_PIECES_BLACK.QUEEN:\r\n            return PIECES.QUEEN\r\n        case FEN_PIECES_BLACK.ROOK:\r\n            return PIECES.ROOK\r\n        case FEN_PIECES_BLACK.BISHOP:\r\n            return PIECES.BISHOP\r\n        default:\r\n            return \"\";\r\n    }\r\n}\r\n\r\n//converts the FEN piece notation to a piece that we can use in the square component\r\nexport function ConvertFENPieceToPiece(value) {\r\n    if (IsUpperCase(value)) {\r\n        return `${COLORS.WHITE}-${ConvertFENtoPiece(value)}`;\r\n    }\r\n\r\n    if (IsLowerCase(value)) {\r\n        return `${COLORS.BLACK}-${ConvertFENtoPiece(value)}`;\r\n    }\r\n\r\n    return \"\";\r\n}\r\n\r\nexport function ConvertFenToString(value) {\r\n    let result = [];\r\n\r\n    for (let i = 0; i < value.length; i++) {\r\n        if (IsDigit(value.charAt(i))) {\r\n            for (let j = 0; j < Number(value.charAt(i)); j++) {\r\n                result.push(\" \")\r\n            }\r\n        } else {\r\n            result.push(value.charAt(i))\r\n        }\r\n    }\r\n\r\n    return result.join('');\r\n}\r\n\r\nfunction checkIfTwoSquaresAreOnTheSameRow(square1, square2) {\r\n    return square1.props.x == square2.props.x\r\n}\r\n\r\nfunction checkIfWeAreOnTheSquaresRow(square, rowNumber) {\r\n    return square.props.x == rowNumber\r\n}\r\n\r\n//gets the piece\r\nexport function getPiece(square) {\r\n    return square.props.piece.split(PIECE_DELIMITER)[PIECE_PIECE_INDEX]\r\n}\r\n\r\n//checks if piece is positioned on a certain square\r\nexport function doesTheSquareHasThePiece(square, piece) {\r\n    let p = getPiece(square)\r\n\r\n    return p == piece\r\n}\r\n\r\n//gets the piece color\r\nexport function getPieceColor(square) {\r\n    return square.props.piece.split(PIECE_DELIMITER)[PIECE_COLOR_INDEX]\r\n}\r\n\r\n//checks if a color is white\r\nexport function isColorWhite(color) {\r\n    return color == COLORS.WHITE\r\n}\r\n\r\nfunction areWeCastling(square1, square2) {\r\n    return Math.abs(square1.props.y - square2.props.y) == 2\r\n}\r\n\r\nfunction areWeShortCastling(withWhite = true) {\r\n    const piecesCastling = withWhite ? CASTLE_ROW_WHITE : CASTLE_ROW_BLACK\r\n    const pieces = withWhite ? [...FEN_PIECES_WHITE] : [...FEN_PIECES_BLACK]\r\n\r\n    return BoardPosition[piecesCastling][CASTLE_ROOK_INITIAL_COL_SHORT] == pieces.ROOK &&\r\n        BoardPosition[piecesCastling][CASTLE_KING_INITIAL_COL]\r\n    CASTLE_PATH_COLS_SHORT.every(col => BoardPosition[piecesCastling][col] == EMPTY_SQUARE_PIECE);\r\n}\r\n\r\nfunction areWeLongCastling(withWhite = true) {\r\n    const piecesCastling = withWhite ? CASTLE_ROW_WHITE : CASTLE_ROW_BLACK\r\n    const pieces = withWhite ? [...FEN_PIECES_WHITE] : [...FEN_PIECES_BLACK]\r\n\r\n    return BoardPosition[piecesCastling][CASTLE_ROOK_INITIAL_COL_LONG] == pieces.ROOK &&\r\n        CASTLE_PATH_COLS_LONG.every(col => BoardPosition[piecesCastling][col] == EMPTY_SQUARE_PIECE);\r\n}\r\n\r\nexport function UpdatePosition(square, targetSquare, position) {\r\n    let pos = [];\r\n\r\n    for (let rowNumber = 0; rowNumber < position.length; rowNumber++) {\r\n        if (checkIfTwoSquaresAreOnTheSameRow(square, targetSquare) && checkIfWeAreOnTheSquaresRow(square, rowNumber)) {\r\n            let row = position[rowNumber]\r\n            if (doesTheSquareHasThePiece(square, PIECES.KING) && areWeCastling(square, targetSquare)) {\r\n                let color = getPieceColor(square)\r\n\r\n                if (areWeLongCastling() || areWeLongCastling(false)) {\r\n                    let kingPiece = isColorWhite(color) ? FEN_PIECES_WHITE.KING : FEN_PIECES_BLACK.KING\r\n                    let rookPiece = isColorWhite(color) ? FEN_PIECES_WHITE.ROOK : FEN_PIECES_BLACK.ROOK\r\n\r\n                    for (let i = 0; i < EMPTY_SQUARES_AFTER_LONG_CASTLE.length; i++) {\r\n                        row[i] = EMPTY_SQUARE_PIECE\r\n                    }\r\n\r\n                    row[CASTLE_KING_FINAL_COL_LONG] = kingPiece\r\n                    row[CASTLE_ROOK_FINAL_COL_LONG] = rookPiece\r\n                }\r\n\r\n                if (areWeShortCastling() || areWeShortCastling(false)) {\r\n                    let kingPiece = isColorWhite(color) ? FEN_PIECES_WHITE.KING : FEN_PIECES_BLACK.KING\r\n                    let rookPiece = isColorWhite(color) ? FEN_PIECES_WHITE.ROOK : FEN_PIECES_BLACK.ROOK\r\n\r\n                    for (let i = 0; i < EMPTY_SQUARES_AFTER_SHORT_CASTLE.length; i++) {\r\n                        row[i] = EMPTY_SQUARE_PIECE\r\n                    }\r\n\r\n                    row[CASTLE_KING_FINAL_COL_SHORT] = kingPiece\r\n                    row[CASTLE_ROOK_FINAL_COL_SHORT] = rookPiece\r\n                }\r\n            }\r\n            row = SidewaysCapture(row, Number(square.props.y), Number(targetSquare.props.y), square.props.piece)\r\n            pos.push(row)\r\n        } else if (checkIfWeAreOnTheSquaresRow(square, rowNumber)) {\r\n            let row = position[rowNumber]\r\n            row[square.props.y] = EMPTY_SQUARE_PIECE\r\n            pos.push(row)\r\n        } else if (checkIfWeAreOnTheSquaresRow(targetSquare, rowNumber)) {\r\n            let row = position[rowNumber]\r\n            row[targetSquare.props.y] = ConvertPieceToFENPiece(square.props.piece)\r\n            pos.push(row)\r\n        } else {\r\n            pos.push(position[rowNumber])\r\n        }\r\n    }\r\n\r\n    return pos;\r\n}\r\n\r\nfunction SidewaysCapture(row, y, targetY, value) {\r\n    let result = []\r\n\r\n    for (let i = 0; i < row.length; i++) {\r\n        if (i == y) {\r\n            result.push(\" \")\r\n        } else if (i == targetY) {\r\n            result.push(ConvertPieceToFENPiece(value))\r\n        } else {\r\n            result.push(row[i])\r\n        }\r\n    }\r\n\r\n    return result\r\n}\r\n\r\nfunction ConvertStringToFEN(value) {\r\n    let result = [];\r\n\r\n    let counter = 0;\r\n    for (let i = 0; i < value.length; i++) {\r\n        if (value.charAt(i) == ' ') {\r\n            counter++;\r\n        } else {\r\n            if (counter != 0) {\r\n                result.push(counter)\r\n            }\r\n            result.push(value.charAt(i))\r\n            counter = 0;\r\n        }\r\n    }\r\n\r\n    if (counter != 0) {\r\n        result.push(counter)\r\n    }\r\n\r\n    return result.join('')\r\n}\r\n\r\nfunction replaceAt(value, replacement, index) {\r\n    return value.substring(0, index) + replacement + value.substring(index + replacement.toString().length);\r\n}\r\n\r\nfunction ConvertPieceToFENPiece(value) {\r\n    let color = value.split('-')[0]\r\n    let piece = value.split('-')[1]\r\n\r\n    let p = '';\r\n\r\n    switch (piece) {\r\n        case \"pawn\":\r\n            p = 'p';\r\n            break;\r\n        case \"knight\":\r\n            p = 'n';\r\n            break;\r\n        case \"bishop\":\r\n            p = 'b';\r\n            break;\r\n        case \"rook\":\r\n            p = 'r';\r\n            break;\r\n        case \"queen\":\r\n            p = 'q';\r\n            break;\r\n        case \"king\":\r\n            p = 'k';\r\n            break;\r\n        default:\r\n            break;\r\n    }\r\n\r\n    return color == \"white\" ? p.toString().toUpperCase() : p.toString()\r\n}"],"mappings":"AAAA,SACIA,MAAM,EAAEC,gBAAgB,EAAEC,MAAM,EAAEC,gBAAgB,EAAEC,gBAAgB,EAAEC,uBAAuB,EAAEC,4BAA4B,EAAEC,6BAA6B,EAC1JC,qBAAqB,EAAEC,sBAAsB,EAAEC,iBAAiB,EAAEC,iBAAiB,EAAEC,gBAAgB,EAAEC,kBAAkB,EAAEC,0BAA0B,EACrJC,2BAA2B,EAAEC,0BAA0B,EAAEC,2BAA2B,EAAEC,+BAA+B,EAAEC,gCAAgC,EACvJC,aAAa,QACV,mBAAmB;;AAE1B;AACA,OAAO,SAASC,WAAWA,CAACC,KAAK,EAAE;EAC/B,OAAOA,KAAK,CAACC,UAAU,CAAC,CAAC,CAAC,IAAI,EAAE,IAAID,KAAK,CAACC,UAAU,CAAC,CAAC,CAAC,IAAI,EAAE;AACjE;;AAEA;AAAAC,EAAA,GAJgBH,WAAW;AAK3B,OAAO,SAASI,WAAWA,CAACH,KAAK,EAAE;EAC/B,OAAOA,KAAK,CAACC,UAAU,CAAC,CAAC,CAAC,IAAI,EAAE,IAAID,KAAK,CAACC,UAAU,CAAC,CAAC,CAAC,IAAI,GAAG;AAClE;;AAEA;AAAAG,GAAA,GAJgBD,WAAW;AAK3B,OAAO,SAASE,OAAOA,CAACL,KAAK,EAAE;EAC3B,OAAOA,KAAK,CAACC,UAAU,CAAC,CAAC,CAAC,IAAI,EAAE,IAAID,KAAK,CAACC,UAAU,CAAC,CAAC,CAAC,IAAI,EAAE;AACjE;;AAEA;AAAAK,GAAA,GAJgBD,OAAO;AAKvB,OAAO,SAASE,QAAQA,CAACC,GAAG,EAAE;EAC1B,MAAMC,QAAQ,GAAGD,GAAG,CAACE,KAAK,CAAC,GAAG,CAAC;EAE/B,IAAID,QAAQ,CAACE,MAAM,IAAI,CAAC,EAAE;IACtBC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;IAC1B;EACJ;EAEA,MAAMC,QAAQ,GAAGL,QAAQ,CAAC,CAAC,CAAC;EAC5B,MAAMM,OAAO,GAAGN,QAAQ,CAAC,CAAC,CAAC;EAC3B,MAAMO,WAAW,GAAGP,QAAQ,CAAC,CAAC,CAAC;EAC/B,MAAMQ,YAAY,GAAGR,QAAQ,CAAC,CAAC,CAAC;EAChC,MAAMS,YAAY,GAAGC,MAAM,CAACV,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxC,MAAMW,YAAY,GAAGD,MAAM,CAACV,QAAQ,CAAC,CAAC,CAAC,CAAC;EAExC,OAAO;IAAEK,QAAQ;IAAEC,OAAO;IAAEC,WAAW;IAAEC,YAAY;IAAEC,YAAY;IAAEE;EAAa,CAAC;AACvF;;AAEA;AAAAC,GAAA,GAlBgBd,QAAQ;AAmBxB,OAAO,SAASe,iBAAiBA,CAACC,MAAM,EAAE;EACtC,QAAQA,MAAM,CAACC,WAAW,CAAC,CAAC;IACxB,KAAK7C,gBAAgB,CAAC8C,IAAI;MACtB,OAAO/C,MAAM,CAAC+C,IAAI;IACtB,KAAK9C,gBAAgB,CAAC+C,MAAM;MACxB,OAAOhD,MAAM,CAACgD,MAAM;IACxB,KAAK/C,gBAAgB,CAACgD,IAAI;MACtB,OAAOjD,MAAM,CAACiD,IAAI;IACtB,KAAKhD,gBAAgB,CAACiD,KAAK;MACvB,OAAOlD,MAAM,CAACkD,KAAK;IACvB,KAAKjD,gBAAgB,CAACkD,IAAI;MACtB,OAAOnD,MAAM,CAACmD,IAAI;IACtB,KAAKlD,gBAAgB,CAACmD,MAAM;MACxB,OAAOpD,MAAM,CAACoD,MAAM;IACxB;MACI,OAAO,EAAE;EACjB;AACJ;;AAEA;AAAAC,GAAA,GAnBgBT,iBAAiB;AAoBjC,OAAO,SAASU,sBAAsBA,CAAChC,KAAK,EAAE;EAC1C,IAAID,WAAW,CAACC,KAAK,CAAC,EAAE;IACpB,OAAQ,GAAEpB,MAAM,CAACqD,KAAM,IAAGX,iBAAiB,CAACtB,KAAK,CAAE,EAAC;EACxD;EAEA,IAAIG,WAAW,CAACH,KAAK,CAAC,EAAE;IACpB,OAAQ,GAAEpB,MAAM,CAACsD,KAAM,IAAGZ,iBAAiB,CAACtB,KAAK,CAAE,EAAC;EACxD;EAEA,OAAO,EAAE;AACb;AAACmC,GAAA,GAVeH,sBAAsB;AAYtC,OAAO,SAASI,kBAAkBA,CAACpC,KAAK,EAAE;EACtC,IAAIqC,MAAM,GAAG,EAAE;EAEf,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGtC,KAAK,CAACW,MAAM,EAAE2B,CAAC,EAAE,EAAE;IACnC,IAAIjC,OAAO,CAACL,KAAK,CAACuC,MAAM,CAACD,CAAC,CAAC,CAAC,EAAE;MAC1B,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGrB,MAAM,CAACnB,KAAK,CAACuC,MAAM,CAACD,CAAC,CAAC,CAAC,EAAEE,CAAC,EAAE,EAAE;QAC9CH,MAAM,CAACI,IAAI,CAAC,GAAG,CAAC;MACpB;IACJ,CAAC,MAAM;MACHJ,MAAM,CAACI,IAAI,CAACzC,KAAK,CAACuC,MAAM,CAACD,CAAC,CAAC,CAAC;IAChC;EACJ;EAEA,OAAOD,MAAM,CAACK,IAAI,CAAC,EAAE,CAAC;AAC1B;AAACC,GAAA,GAdeP,kBAAkB;AAgBlC,SAASQ,gCAAgCA,CAACC,OAAO,EAAEC,OAAO,EAAE;EACxD,OAAOD,OAAO,CAACE,KAAK,CAACC,CAAC,IAAIF,OAAO,CAACC,KAAK,CAACC,CAAC;AAC7C;AAEA,SAASC,2BAA2BA,CAACC,MAAM,EAAEC,SAAS,EAAE;EACpD,OAAOD,MAAM,CAACH,KAAK,CAACC,CAAC,IAAIG,SAAS;AACtC;;AAEA;AACA,OAAO,SAASC,QAAQA,CAACF,MAAM,EAAE;EAC7B,OAAOA,MAAM,CAACH,KAAK,CAACM,KAAK,CAAC3C,KAAK,CAAC4C,eAAe,CAAC,CAACjE,iBAAiB,CAAC;AACvE;;AAEA;AACA,OAAO,SAASkE,wBAAwBA,CAACL,MAAM,EAAEG,KAAK,EAAE;EACpD,IAAIG,CAAC,GAAGJ,QAAQ,CAACF,MAAM,CAAC;EAExB,OAAOM,CAAC,IAAIH,KAAK;AACrB;;AAEA;AACA,OAAO,SAASI,aAAaA,CAACP,MAAM,EAAE;EAClC,OAAOA,MAAM,CAACH,KAAK,CAACM,KAAK,CAAC3C,KAAK,CAAC4C,eAAe,CAAC,CAAClE,iBAAiB,CAAC;AACvE;;AAEA;AACA,OAAO,SAASsE,YAAYA,CAACC,KAAK,EAAE;EAChC,OAAOA,KAAK,IAAI/E,MAAM,CAACqD,KAAK;AAChC;AAEA,SAAS2B,aAAaA,CAACf,OAAO,EAAEC,OAAO,EAAE;EACrC,OAAOe,IAAI,CAACC,GAAG,CAACjB,OAAO,CAACE,KAAK,CAACgB,CAAC,GAAGjB,OAAO,CAACC,KAAK,CAACgB,CAAC,CAAC,IAAI,CAAC;AAC3D;AAEA,SAASC,kBAAkBA,CAACC,SAAS,GAAG,IAAI,EAAE;EAC1C,MAAMC,cAAc,GAAGD,SAAS,GAAGpF,gBAAgB,GAAGC,gBAAgB;EACtE,MAAMqF,MAAM,GAAGF,SAAS,GAAG,CAAC,GAAG3E,gBAAgB,CAAC,GAAG,CAAC,GAAGX,gBAAgB,CAAC;EAExE,OAAOmB,aAAa,CAACoE,cAAc,CAAC,CAACjF,6BAA6B,CAAC,IAAIkF,MAAM,CAACtC,IAAI,IAC9E/B,aAAa,CAACoE,cAAc,CAAC,CAACnF,uBAAuB,CAAC;EAC1DI,sBAAsB,CAACiF,KAAK,CAACC,GAAG,IAAIvE,aAAa,CAACoE,cAAc,CAAC,CAACG,GAAG,CAAC,IAAI9E,kBAAkB,CAAC;AACjG;AAEA,SAAS+E,iBAAiBA,CAACL,SAAS,GAAG,IAAI,EAAE;EACzC,MAAMC,cAAc,GAAGD,SAAS,GAAGpF,gBAAgB,GAAGC,gBAAgB;EACtE,MAAMqF,MAAM,GAAGF,SAAS,GAAG,CAAC,GAAG3E,gBAAgB,CAAC,GAAG,CAAC,GAAGX,gBAAgB,CAAC;EAExE,OAAOmB,aAAa,CAACoE,cAAc,CAAC,CAAClF,4BAA4B,CAAC,IAAImF,MAAM,CAACtC,IAAI,IAC7E3C,qBAAqB,CAACkF,KAAK,CAACC,GAAG,IAAIvE,aAAa,CAACoE,cAAc,CAAC,CAACG,GAAG,CAAC,IAAI9E,kBAAkB,CAAC;AACpG;AAEA,OAAO,SAASgF,cAAcA,CAACrB,MAAM,EAAEsB,YAAY,EAAEC,QAAQ,EAAE;EAC3D,IAAIC,GAAG,GAAG,EAAE;EAEZ,KAAK,IAAIvB,SAAS,GAAG,CAAC,EAAEA,SAAS,GAAGsB,QAAQ,CAAC9D,MAAM,EAAEwC,SAAS,EAAE,EAAE;IAC9D,IAAIP,gCAAgC,CAACM,MAAM,EAAEsB,YAAY,CAAC,IAAIvB,2BAA2B,CAACC,MAAM,EAAEC,SAAS,CAAC,EAAE;MAC1G,IAAIwB,GAAG,GAAGF,QAAQ,CAACtB,SAAS,CAAC;MAC7B,IAAII,wBAAwB,CAACL,MAAM,EAAExE,MAAM,CAACiD,IAAI,CAAC,IAAIiC,aAAa,CAACV,MAAM,EAAEsB,YAAY,CAAC,EAAE;QACtF,IAAIb,KAAK,GAAGF,aAAa,CAACP,MAAM,CAAC;QAEjC,IAAIoB,iBAAiB,CAAC,CAAC,IAAIA,iBAAiB,CAAC,KAAK,CAAC,EAAE;UACjD,IAAIM,SAAS,GAAGlB,YAAY,CAACC,KAAK,CAAC,GAAGrE,gBAAgB,CAACqC,IAAI,GAAGhD,gBAAgB,CAACgD,IAAI;UACnF,IAAIkD,SAAS,GAAGnB,YAAY,CAACC,KAAK,CAAC,GAAGrE,gBAAgB,CAACuC,IAAI,GAAGlD,gBAAgB,CAACkD,IAAI;UAEnF,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG1C,+BAA+B,CAACe,MAAM,EAAE2B,CAAC,EAAE,EAAE;YAC7DqC,GAAG,CAACrC,CAAC,CAAC,GAAG/C,kBAAkB;UAC/B;UAEAoF,GAAG,CAACjF,0BAA0B,CAAC,GAAGkF,SAAS;UAC3CD,GAAG,CAACnF,0BAA0B,CAAC,GAAGqF,SAAS;QAC/C;QAEA,IAAIb,kBAAkB,CAAC,CAAC,IAAIA,kBAAkB,CAAC,KAAK,CAAC,EAAE;UACnD,IAAIY,SAAS,GAAGlB,YAAY,CAACC,KAAK,CAAC,GAAGrE,gBAAgB,CAACqC,IAAI,GAAGhD,gBAAgB,CAACgD,IAAI;UACnF,IAAIkD,SAAS,GAAGnB,YAAY,CAACC,KAAK,CAAC,GAAGrE,gBAAgB,CAACuC,IAAI,GAAGlD,gBAAgB,CAACkD,IAAI;UAEnF,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGzC,gCAAgC,CAACc,MAAM,EAAE2B,CAAC,EAAE,EAAE;YAC9DqC,GAAG,CAACrC,CAAC,CAAC,GAAG/C,kBAAkB;UAC/B;UAEAoF,GAAG,CAAChF,2BAA2B,CAAC,GAAGiF,SAAS;UAC5CD,GAAG,CAAClF,2BAA2B,CAAC,GAAGoF,SAAS;QAChD;MACJ;MACAF,GAAG,GAAGG,eAAe,CAACH,GAAG,EAAExD,MAAM,CAAC+B,MAAM,CAACH,KAAK,CAACgB,CAAC,CAAC,EAAE5C,MAAM,CAACqD,YAAY,CAACzB,KAAK,CAACgB,CAAC,CAAC,EAAEb,MAAM,CAACH,KAAK,CAACM,KAAK,CAAC;MACpGqB,GAAG,CAACjC,IAAI,CAACkC,GAAG,CAAC;IACjB,CAAC,MAAM,IAAI1B,2BAA2B,CAACC,MAAM,EAAEC,SAAS,CAAC,EAAE;MACvD,IAAIwB,GAAG,GAAGF,QAAQ,CAACtB,SAAS,CAAC;MAC7BwB,GAAG,CAACzB,MAAM,CAACH,KAAK,CAACgB,CAAC,CAAC,GAAGxE,kBAAkB;MACxCmF,GAAG,CAACjC,IAAI,CAACkC,GAAG,CAAC;IACjB,CAAC,MAAM,IAAI1B,2BAA2B,CAACuB,YAAY,EAAErB,SAAS,CAAC,EAAE;MAC7D,IAAIwB,GAAG,GAAGF,QAAQ,CAACtB,SAAS,CAAC;MAC7BwB,GAAG,CAACH,YAAY,CAACzB,KAAK,CAACgB,CAAC,CAAC,GAAGgB,sBAAsB,CAAC7B,MAAM,CAACH,KAAK,CAACM,KAAK,CAAC;MACtEqB,GAAG,CAACjC,IAAI,CAACkC,GAAG,CAAC;IACjB,CAAC,MAAM;MACHD,GAAG,CAACjC,IAAI,CAACgC,QAAQ,CAACtB,SAAS,CAAC,CAAC;IACjC;EACJ;EAEA,OAAOuB,GAAG;AACd;AAACM,GAAA,GAjDeT,cAAc;AAmD9B,SAASO,eAAeA,CAACH,GAAG,EAAEZ,CAAC,EAAEkB,OAAO,EAAEjF,KAAK,EAAE;EAC7C,IAAIqC,MAAM,GAAG,EAAE;EAEf,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGqC,GAAG,CAAChE,MAAM,EAAE2B,CAAC,EAAE,EAAE;IACjC,IAAIA,CAAC,IAAIyB,CAAC,EAAE;MACR1B,MAAM,CAACI,IAAI,CAAC,GAAG,CAAC;IACpB,CAAC,MAAM,IAAIH,CAAC,IAAI2C,OAAO,EAAE;MACrB5C,MAAM,CAACI,IAAI,CAACsC,sBAAsB,CAAC/E,KAAK,CAAC,CAAC;IAC9C,CAAC,MAAM;MACHqC,MAAM,CAACI,IAAI,CAACkC,GAAG,CAACrC,CAAC,CAAC,CAAC;IACvB;EACJ;EAEA,OAAOD,MAAM;AACjB;AAAC6C,GAAA,GAdQJ,eAAe;AAgBxB,SAASK,kBAAkBA,CAACnF,KAAK,EAAE;EAC/B,IAAIqC,MAAM,GAAG,EAAE;EAEf,IAAI+C,OAAO,GAAG,CAAC;EACf,KAAK,IAAI9C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGtC,KAAK,CAACW,MAAM,EAAE2B,CAAC,EAAE,EAAE;IACnC,IAAItC,KAAK,CAACuC,MAAM,CAACD,CAAC,CAAC,IAAI,GAAG,EAAE;MACxB8C,OAAO,EAAE;IACb,CAAC,MAAM;MACH,IAAIA,OAAO,IAAI,CAAC,EAAE;QACd/C,MAAM,CAACI,IAAI,CAAC2C,OAAO,CAAC;MACxB;MACA/C,MAAM,CAACI,IAAI,CAACzC,KAAK,CAACuC,MAAM,CAACD,CAAC,CAAC,CAAC;MAC5B8C,OAAO,GAAG,CAAC;IACf;EACJ;EAEA,IAAIA,OAAO,IAAI,CAAC,EAAE;IACd/C,MAAM,CAACI,IAAI,CAAC2C,OAAO,CAAC;EACxB;EAEA,OAAO/C,MAAM,CAACK,IAAI,CAAC,EAAE,CAAC;AAC1B;AAAC2C,IAAA,GArBQF,kBAAkB;AAuB3B,SAASG,SAASA,CAACtF,KAAK,EAAEuF,WAAW,EAAEC,KAAK,EAAE;EAC1C,OAAOxF,KAAK,CAACyF,SAAS,CAAC,CAAC,EAAED,KAAK,CAAC,GAAGD,WAAW,GAAGvF,KAAK,CAACyF,SAAS,CAACD,KAAK,GAAGD,WAAW,CAACG,QAAQ,CAAC,CAAC,CAAC/E,MAAM,CAAC;AAC3G;AAEA,SAASoE,sBAAsBA,CAAC/E,KAAK,EAAE;EACnC,IAAI2D,KAAK,GAAG3D,KAAK,CAACU,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC/B,IAAI2C,KAAK,GAAGrD,KAAK,CAACU,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAE/B,IAAI8C,CAAC,GAAG,EAAE;EAEV,QAAQH,KAAK;IACT,KAAK,MAAM;MACPG,CAAC,GAAG,GAAG;MACP;IACJ,KAAK,QAAQ;MACTA,CAAC,GAAG,GAAG;MACP;IACJ,KAAK,QAAQ;MACTA,CAAC,GAAG,GAAG;MACP;IACJ,KAAK,MAAM;MACPA,CAAC,GAAG,GAAG;MACP;IACJ,KAAK,OAAO;MACRA,CAAC,GAAG,GAAG;MACP;IACJ,KAAK,MAAM;MACPA,CAAC,GAAG,GAAG;MACP;IACJ;MACI;EACR;EAEA,OAAOG,KAAK,IAAI,OAAO,GAAGH,CAAC,CAACkC,QAAQ,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,GAAGnC,CAAC,CAACkC,QAAQ,CAAC,CAAC;AACvE;AAACE,IAAA,GA9BQb,sBAAsB;AAAA,IAAA7E,EAAA,EAAAE,GAAA,EAAAE,GAAA,EAAAe,GAAA,EAAAU,GAAA,EAAAI,GAAA,EAAAQ,GAAA,EAAAqC,GAAA,EAAAE,GAAA,EAAAG,IAAA,EAAAO,IAAA;AAAAC,YAAA,CAAA3F,EAAA;AAAA2F,YAAA,CAAAzF,GAAA;AAAAyF,YAAA,CAAAvF,GAAA;AAAAuF,YAAA,CAAAxE,GAAA;AAAAwE,YAAA,CAAA9D,GAAA;AAAA8D,YAAA,CAAA1D,GAAA;AAAA0D,YAAA,CAAAlD,GAAA;AAAAkD,YAAA,CAAAb,GAAA;AAAAa,YAAA,CAAAX,GAAA;AAAAW,YAAA,CAAAR,IAAA;AAAAQ,YAAA,CAAAD,IAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}